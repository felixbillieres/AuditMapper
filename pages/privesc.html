<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cockpit Privesc v3 (Checklist Dynamique)</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <!-- Styles sp√©cifiques pour la nouvelle checklist -->
    <style>
        .checklist-item {
            border: 1px solid #ddd;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 5px;
            background-color: var(--background-color-secondary); /* Adapte au th√®me */
        }
        .checklist-item.status-checked { border-left: 5px solid #198754; } /* Vert */
        .checklist-item.status-exploitable { border-left: 5px solid #ffc107; } /* Jaune */
        .checklist-item.status-exploited { border-left: 5px solid #dc3545; } /* Rouge */

        .checklist-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
        .checklist-label { font-weight: bold; }
        .checklist-status select { font-size: 0.8rem; padding: 0.1rem 0.3rem; }
        .checklist-description { font-size: 0.9rem; margin-bottom: 0.75rem; }
        .checklist-commands, .checklist-links, .checklist-tips, .checklist-notes { margin-top: 0.75rem; }
        .checklist-commands pre { background-color: var(--code-background-color); padding: 0.5rem; border-radius: 3px; font-size: 0.85rem; position: relative; }
        .copy-btn-inline { position: absolute; top: 5px; right: 5px; font-size: 0.8em; padding: 2px 5px; }
        .checklist-links a { margin-right: 10px; font-size: 0.85rem; }
        .checklist-tips { font-style: italic; color: #6c757d; font-size: 0.85rem; }
        .checklist-notes textarea { width: 100%; font-size: 0.85rem; min-height: 60px; margin-top: 5px; }
        .filter-controls { background-color: var(--background-color-light); padding: 0.5rem 1rem; margin-bottom: 1rem; border-radius: 5px; }
    </style>
</head>
<body>
    <!-- Header (peut rester identique ou √™tre adapt√© √† Bootstrap) -->
    <header id="main-header" class="main-header">
        <div class="header-container">
            <h1>Cockpit Privesc v3 (Checklist Dynamique)</h1>
            <div class="header-controls">
                <button id="sidebar-toggle" class="sidebar-toggle"><i>‚ò∞</i></button>
                <!-- Language, Theme toggles -->
                <div class="language-selector">
                    <button id="languageDropdown" class="language-dropdown"><i class="icon-language">üåç</i><span id="currentLanguage">Fran√ßais</span><i class="dropdown-arrow">‚ñº</i></button>
                    <div id="languageMenu" class="language-menu">
                        <div class="language-option" data-lang="fr"><span class="language-flag">üá´üá∑</span>Fran√ßais</div>
                        <div class="language-option" data-lang="en"><span class="language-flag">üá¨üáß</span>English</div>
                    </div>
                </div>
                <button id="toggleTheme" class="theme-toggle"><i class="icon-theme">üåì</i></button>
            </div>
        </div>
    </header>

    <!-- Sidebar (identique) -->
    <div id="sidebar" class="sidebar">
        <a href="/index.html" class="sidebar-header"><h2>Pentest Tools</h2><p>Suite d'outils pour pentest</p></a>
        <div class="sidebar-content">
            <ul class="sidebar-nav">
                <div class="sidebar-category">G√©n√©rateur</div>
                <li class="sidebar-nav-item"><a href="/pages/hostmanager.html" class="sidebar-nav-link"><i>üñ•Ô∏è</i> Host Manager</a></li>
                <div class="sidebar-category">Outils</div>
                <li class="sidebar-nav-item"><a href="/pages/tools.html" class="sidebar-nav-link"><i>üõ†Ô∏è</i> Biblioth√®que d'outils</a></li>
                <li class="sidebar-nav-item"><a href="/pages/privesc.html" class="sidebar-nav-link active"><i>üîë</i> Guide Privesc</a></li>
                <div class="sidebar-category">Parsers</div>
                <li class="sidebar-nav-item"><a href="/pages/hostsmaker.html" class="sidebar-nav-link"><i>üåê</i> /etc/hosts Maker</a></li>
                <li class="sidebar-nav-item"><a href="/pages/grepmaster.html" class="sidebar-nav-link"><i>üîç</i> Grep Master</a></li>
                <li class="sidebar-nav-item"><a href="/pages/vulnreport.html" class="sidebar-nav-link"><i>üîí</i> Rapport de Vuln√©rabilit√©s</a></li>
            </ul>
        </div>
    </div>

    <!-- Contenu Principal -->
    <div id="main-content" class="main-content">
        <!-- Barre de S√©lection du Node -->
        <div class="node-selector-bar d-flex align-items-center p-2 border-bottom bg-light sticky-top">
            <label for="node-select" class="form-label mb-0 me-2 fw-bold">Node (depuis HostManager):</label>
            <select id="node-select" class="form-select form-select-sm me-3" style="max-width: 300px;">
                <option value="">-- Charger les donn√©es HostManager... --</option>
                <!-- Options charg√©es par JS -->
            </select>
            <div id="active-node-info" class="node-info flex-grow-1 small text-muted">
                S√©lectionnez un node...
            </div>
        </div>

        <!-- Zone Principale : Checklist Dynamique -->
        <div class="container-fluid mt-3">
            <!-- Filtres -->
            <div class="filter-controls d-flex align-items-center flex-wrap">
                 <span class="me-2 fw-bold small">Filtrer Checklist:</span>
                 <input type="text" id="checklist-search" class="form-control form-control-sm me-2 mb-1" placeholder="Rechercher par mot-cl√©..." style="width: 200px;">
                 <select id="checklist-filter-status" class="form-select form-select-sm me-2 mb-1" style="width: 150px;">
                     <option value="">Tous les statuts</option>
                     <option value="todo">√Ä v√©rifier</option>
                     <option value="checked">V√©rifi√©</option>
                     <option value="exploitable">Potentiellement Exploitable</option>
                     <option value="exploited">Confirm√© Exploit√©</option>
                 </select>
                 <select id="checklist-filter-tag" class="form-select form-select-sm mb-1" style="width: 150px;">
                     <option value="">Tous les tags</option>
                     <!-- Tags charg√©s dynamiquement -->
                 </select>
                 <button id="apply-checklist-filters" class="btn btn-secondary btn-sm ms-2 mb-1">Filtrer</button>
            </div>

            <!-- Conteneur de la Checklist -->
            <div id="checklist-container" class="mt-3">
                <p class="text-muted text-center" id="checklist-placeholder">S√©lectionnez un node pour afficher la checklist contextuelle.</p>
                <!-- La checklist sera g√©n√©r√©e ici par JS -->
            </div>
        </div>
        <!-- FIN Zone Principale -->

    </div> <!-- Fin #main-content -->

    <!-- Footer (peut rester identique) -->
    <footer class="main-footer">
        <div class="footer-content">
            <p>Made with ‚ù§Ô∏è by Elliot Belt</p>
        </div>
    </footer>

    <!-- Scripts JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/sidebar.js"></script>
    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/language.js"></script>
    <!-- Le NOUVEAU script privesc.js -->
    <script src="/assets/js/privesc_refactored.js"></script>
    <!-- Ajouter le script pour les donn√©es de checklist si externalis√© -->
    <!-- <script src="/assets/js/checklist-data.js"></script> -->

    <!-- Template pour un item de checklist (utilis√© par JS) -->
    <template id="checklist-item-template">
        <div class="checklist-item" data-item-id="" data-tags="">
            <div class="checklist-header">
                <span class="checklist-label"></span>
                <div class="checklist-status">
                    <select class="form-select form-select-sm checklist-status-select">
                        <option value="todo">√Ä v√©rifier</option>
                        <option value="checked">V√©rifi√©</option>
                        <option value="exploitable">Potentiellement Exploitable</option>
                        <option value="exploited">Confirm√© Exploit√©</option>
                    </select>
                </div>
            </div>
            <div class="checklist-description text-muted"></div>
            <div class="checklist-commands">
                <h6><i class="fas fa-terminal"></i> Commandes</h6>
                <div class="check-command">
                    <small>V√©rification :</small>
                    <pre><code class="language-bash"></code><button class="copy-btn-inline btn btn-sm btn-outline-secondary" title="Copier"><i class="fas fa-copy"></i></button></pre>
                </div>
                <div class="exploit-command" style="display: none;"> <!-- Cach√© si vide -->
                     <small>Exploitation (Exemple - √Ä ADAPTER !) :</small>
                     <pre><code class="language-bash"></code><button class="copy-btn-inline btn btn-sm btn-outline-secondary" title="Copier"><i class="fas fa-copy"></i></button></pre>
                </div>
            </div>
            <div class="checklist-links" style="display: none;"> <!-- Cach√© si vide -->
                <h6><i class="fas fa-link"></i> Liens Utiles</h6>
                <!-- Liens ajout√©s par JS -->
            </div>
            <div class="checklist-tips" style="display: none;"> <!-- Cach√© si vide -->
                 <h6><i class="fas fa-lightbulb"></i> Astuces</h6>
                 <p></p>
            </div>
            <div class="checklist-notes">
                 <h6><i class="fas fa-pencil-alt"></i> Notes / Output</h6>
                 <textarea class="form-control form-control-sm checklist-notes-textarea" placeholder="Vos observations ou l'output de la commande ici..."></textarea>
            </div>
        </div>
    </template>

</body>
</html> 